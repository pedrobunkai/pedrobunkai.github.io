<video id="video" width="320" height="240" autoplay></video>

<script>
  let video = document.querySelector("#video");

  const videoConfig = {
    'audio': false,
    'video': {
      facingMode: 'user',
      width: 360,
      height: 270,
    }
  };

  console.log('videoConfig:', videoConfig)
  
  const getCamera = async function() {
    let stream = await navigator.mediaDevices.getUserMedia(videoConfig);
    video.srcObject = stream;
    console.log('headers:', headers)
    await new Promise((resolve) => {
      video.onloadedmetadata = () => {
        console.log('got metadata')
        resolve(video);
      };
    })

    console.log('will play video')
    try {
      console.log("inside try")
      await video.play();
      console.log('after await')
    } catch (e) {
      console.log(e)
    }

    console.log('video started')
  };

  getCamera()


</script>